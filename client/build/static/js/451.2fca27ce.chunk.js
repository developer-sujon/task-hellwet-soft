"use strict";(self.webpackChunkfresh_app=self.webpackChunkfresh_app||[]).push([[451],{3397:function(e,t,n){n.d(t,{J5:function(){return u},jj:function(){return d},xh:function(){return c},zH:function(){return o}});var s=n(4165),a=n(5861),r=n(7218),i=(n(5851),r.E.injectEndpoints({endpoints:function(e){return{taskList:e.query({query:function(){return{url:"task/taskList",method:"GET"}}}),taskCreate:e.mutation({query:function(e){return{url:"task/taskCreate",method:"POST",body:e}},onQueryStarted:function(e,t){return(0,a.Z)((0,s.Z)().mark((function e(){var n,a,i,u;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dispatch,a=t.queryFulfilled,e.prev=1,e.next=4,a;case 4:i=e.sent,u=i.data,n(r.E.util.updateQueryData("taskList",void 0,(function(e){e.data.push(u.data)}))),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})))()}}),taskUpdate:e.mutation({query:function(e){var t=e.id,n=e.postBody;return{url:"task/taskUpdate/".concat(t),method:"PATCH",body:n}},onQueryStarted:function(e,t){return(0,a.Z)((0,s.Z)().mark((function n(){var a,i,u,c,o;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.id,i=e.postBody,u=t.dispatch,c=t.queryFulfilled,o=u(r.E.util.updateQueryData("taskList",void 0,(function(e){var t=e.data.findIndex((function(e){return e.id===a}));e.data[t].title=i.title,e.data[t].status=i.status,e.data[t].dueDate=i.dueDate,e.data[t].descriptions=i.descriptions}))),n.prev=3,n.next=6,c;case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(3),o.undo();case 11:case"end":return n.stop()}}),n,null,[[3,8]])})))()}}),taskDelete:e.mutation({query:function(e){return{url:"task/taskDelete/".concat(e),method:"DELETE"}},onQueryStarted:function(e,t){return(0,a.Z)((0,s.Z)().mark((function n(){var a,i,u;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t.dispatch,i=t.queryFulfilled,u=a(r.E.util.updateQueryData("taskList",void 0,(function(t){t.data=t.data.filter((function(t){return t.id!==e}))}))),n.prev=2,n.next=5,i;case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),u.undo();case 10:case"end":return n.stop()}}),n,null,[[2,7]])})))()}})}}})),u=i.useTaskCreateMutation,c=i.useTaskListQuery,o=i.useTaskUpdateMutation,d=i.useTaskDeleteMutation},1451:function(e,t,n){n.r(t);var s=n(4165),a=n(5861),r=n(9439),i=n(7022),u=n(9140),c=n(9743),o=n(2677),d=n(3855),l=n(3360),h=n(4849),f=n(9230),p=n(1134),x=n(4695),m=n(8007),v=n(9826),Z=n(3397),j=n(2791),k=n(7689),g=n(5851),y=n(184);t.default=function(){var e=(0,j.useState)(!0),t=(0,r.Z)(e,2),n=t[0],b=(t[1],(0,j.useState)(null)),D=(0,r.Z)(b,2),C=D[0],w=D[1],S=(0,j.useState)({title:"",descriptions:"",dueDate:"",status:""}),T=(0,r.Z)(S,2),q=T[0],L=T[1],E=(0,f.$G)().t,Q=(0,k.s0)(),I=(0,Z.xh)().data,N=(0,Z.J5)(),z=(0,r.Z)(N,2),B=z[0],G=z[1],U=G.isLoading,V=G.isSuccess,_=(0,Z.zH)(),F=(0,r.Z)(_,2),H=F[0],M=F[1],P=M.isLoading,R=M.isSuccess,J=(0,g.fG)(),A=(0,r.Z)(J,1)[0];(0,j.useEffect)((function(){var e,t=new URLSearchParams(window.location.search).get("id");(null!==t&&w(t),C&&I)&&L(null===I||void 0===I||null===(e=I.data)||void 0===e?void 0:e.find((function(e){return e.id===C})))}),[C,I]);var O=(0,p.cI)({mode:"onChange",defaultValues:q,resolver:(0,x.X)(m.Ry({title:m.Z_().required(E("title is required")).min(3,E("title must be 3 characters long")).max(30,E("title maximum be 30 characters")),descriptions:m.Z_().required(E("descriptions is required")),dueDate:m.hT(),status:m.Z_().required(E("status is required"))}))}),X=O.control,$=O.handleSubmit,K=O.reset,W=O.formState.errors;(0,j.useEffect)((function(){q&&K(q)}),[q]);return(0,j.useEffect)((function(){if(V||R){var e=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),Q("/task")}}),[V,R,n]),(0,y.jsx)(v.Z,{children:(0,y.jsx)(i.Z,{children:(0,y.jsx)(u.Z,{children:(0,y.jsx)(u.Z.Body,{children:(0,y.jsxs)(c.Z,{children:[(0,y.jsx)("h5",{children:E("".concat(C?"Update Task":"Save Task"))}),(0,y.jsx)("hr",{className:"bg-light"}),(0,y.jsx)(o.Z,{children:(0,y.jsxs)(d.Z,{onSubmit:$((function(e){var t={title:e.title,descriptions:e.descriptions,dueDate:e.dueDate,status:e.status};C?H({id:C,postBody:t}):B(t)})),onReset:K,children:[(0,y.jsxs)(c.Z,{class:!0,children:[(0,y.jsx)(o.Z,{sm:4,children:(0,y.jsxs)(d.Z.Group,{className:"mb-3",controlId:"title",children:[(0,y.jsx)(d.Z.Label,{children:E("title")}),(0,y.jsx)(p.Qr,{control:X,name:"title",defaultValue:"",render:function(e){var t=e.field,n=t.onChange,s=(t.onBlur,t.value),a=t.ref;return(0,y.jsx)(d.Z.Control,{onChange:n,value:s,ref:a,isInvalid:W.title,placeholder:E("title of the task"),type:"text",size:"sm"})}}),W.title&&(0,y.jsx)(d.Z.Text,{className:"text-danger",children:W.title.message})]})}),(0,y.jsx)(o.Z,{sm:4,children:(0,y.jsxs)(d.Z.Group,{className:"mb-3",controlId:"dueDate",children:[(0,y.jsx)(d.Z.Label,{children:E("dueDate")}),(0,y.jsx)(p.Qr,{control:X,name:"dueDate",defaultValue:"",render:function(e){var t=e.field,n=t.onChange,s=(t.onBlur,t.value),a=t.ref;return(0,y.jsx)(d.Z.Control,{onChange:n,value:s,ref:a,isInvalid:W.dueDate,placeholder:E("dueDate of the task"),type:"date",size:"sm"})}}),W.dueDate&&(0,y.jsx)(d.Z.Text,{className:"text-danger",children:W.dueDate.message})]})}),(0,y.jsx)(o.Z,{sm:4,children:(0,y.jsxs)(d.Z.Group,{className:"mb-3",controlId:"status",children:[(0,y.jsx)(d.Z.Label,{children:E("status")}),(0,y.jsx)(p.Qr,{control:X,name:"status",defaultValue:"",render:function(e){var t=e.field,n=t.onChange,s=(t.onBlur,t.value),a=t.ref;return(0,y.jsxs)(d.Z.Select,{onChange:n,value:s,ref:a,isInvalid:W.status,placeholder:E("status of the agent"),type:"text",size:"sm",children:[(0,y.jsx)("option",{value:"",children:E("choice status")}),(0,y.jsx)("option",{value:"new",children:E("new")}),(0,y.jsx)("option",{value:"pending",children:E("pending")}),(0,y.jsx)("option",{value:"canceled",children:E("canceled")}),(0,y.jsx)("option",{value:"complete",children:E("complete")})]})}}),W.status&&(0,y.jsx)(d.Z.Text,{className:"text-danger",children:W.status.message})]})}),(0,y.jsx)(o.Z,{sm:12,children:(0,y.jsxs)(d.Z.Group,{className:"mb-3",controlId:"descriptions",children:[(0,y.jsx)(d.Z.Label,{children:E("descriptions")}),(0,y.jsx)(p.Qr,{control:X,name:"descriptions",defaultValue:"",render:function(e){var t=e.field,n=t.onChange,s=(t.onBlur,t.value),a=t.ref;return(0,y.jsx)(d.Z.Control,{onChange:n,value:s,ref:a,isInvalid:W.descriptions,placeholder:E("descriptions of the task"),type:"text",size:"sm",as:"textarea"})}}),W.descriptions&&(0,y.jsx)(d.Z.Text,{className:"text-danger",children:W.descriptions.message})]})})]}),(0,y.jsx)(c.Z,{children:(0,y.jsx)(o.Z,{sm:4,children:(0,y.jsx)(l.Z,{size:"sm",className:"mt-2",type:"submit",children:U||P?(0,y.jsx)(h.Z,{size:"sm",color:"light"}):E("save change")})})})]})})]})})})})})}}}]);
//# sourceMappingURL=451.2fca27ce.chunk.js.map